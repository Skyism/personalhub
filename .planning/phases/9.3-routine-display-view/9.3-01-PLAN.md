---
phase: 9.3-routine-display-view
plan: 01
type: execute
---

<objective>
Create main Skincare module page (`/skincare`) that displays today's routine for quick daily reference, with optional day selection to view other days.

Purpose: Provide the primary skincare view for checking today's morning and night routines at a glance, complementing the editing interface in Phase 9.2.
Output: Working `/skincare` page with today's routine display, day selector, and link to edit routines.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/9.1-skincare-routine-schema/9.1-01-SUMMARY.md
@.planning/phases/9.2-routine-management-ui/9.2-02-SUMMARY.md
@app/skincare/routines/actions.ts
@lib/skincare-seed.ts

**From Phase 9.1:** skincare_routines table with JSONB steps, ISO 8601 day numbering (1=Monday, 7=Sunday), step objects with {id, order, text}.

**From Phase 9.2:** Server Actions available (getRoutines, upsertRoutine, deleteRoutine), RoutineEditor component pattern, day selector UI pattern, DAYS_OF_WEEK helpers from skincare-seed.ts.

**Tech stack available:** Next.js App Router, Server Actions, shadcn/ui (Card, Button), TopAppBar navigation, Tokyo Night design system.

**Established patterns:**
- Client components with 'use client' directive
- Server Actions for data fetching (getRoutines)
- ISO 8601 day conversion: JS Date.getDay() (0=Sunday) → ISO (1=Monday, 7=Sunday)
- Card components for content sections
- TopAppBar for page navigation
- Day selector with 7-day buttons (used in Phase 9.2)

**Current state:**
- Home page links to `/skincare/routines` (edit page)
- No `/skincare` root page exists yet (needs creation)
- getRoutines() Server Action fetches all routines or filtered by dayOfWeek
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create main Skincare page with today's routine display</name>
  <files>app/skincare/page.tsx</files>
  <action>
Create `/skincare` page (main Skincare module view) with:

**Structure:**
- 'use client' directive (needs local state for day selection)
- Import: TopAppBar, Card, Button from shadcn/ui, DAYS_OF_WEEK from skincare-seed, getRoutines from routines/actions
- State: selectedDay (defaults to today's ISO day), routines array, loading boolean

**Day conversion helper (same as Phase 9.2):**
```typescript
const getCurrentDayISO = () => {
  const jsDay = new Date().getDay();
  return jsDay === 0 ? 7 : jsDay; // Convert JS Sunday=0 to ISO Sunday=7
};
```

**Data fetching:**
- useEffect to fetch routines when selectedDay changes
- Call getRoutines() (no filter - fetches all days for potential caching)
- Filter in UI by selectedDay
- Extract morning and night steps from routines array

**UI layout:**
- TopAppBar with title "Skincare" and no fallbackHref (this is top-level module page)
- Today's date prominently displayed (use selectedDay to show day name)
- Day selector Card (horizontal scrollable buttons like Phase 9.2)
- Morning Routine Card:
  - Title: "Morning Routine"
  - If steps exist: ordered list (numbered 1, 2, 3...) showing step.text
  - If no steps: "No morning routine configured. Edit to add steps."
- Night Routine Card:
  - Title: "Night Routine"
  - If steps exist: ordered list showing step.text
  - If no steps: "No night routine configured. Edit to add steps."
- Edit button at bottom: Link to "/skincare/routines" with Button component

**Styling:**
- Match Phase 9.2 patterns: container mx-auto px-4 py-6 space-y-6
- Cards use shadcn/ui Card component
- Day selector matches Phase 9.2 (flex gap-2 overflow-x-auto)
- Routine steps: clean list formatting (text-base, space-y-2)

DON'T add checkbox completion tracking (Phase 9.3 ROADMAP says "optional: checkboxes" - skip for now, keep simple)
DON'T add bottom navigation (Skincare module doesn't have subnav like Finance)
DON'T make steps editable on this page (editing is in /skincare/routines)
</action>
  <verify>
1. `npm run build` succeeds without TypeScript errors
2. Navigate to http://localhost:3000/skincare shows page
3. Day selector displays 7 days with current day selected by default
4. Morning and night routine sections display
5. If routines exist in DB, steps are shown in numbered order
6. Edit button links to /skincare/routines
  </verify>
  <done>Page renders with today's routine, day selector works, Edit button navigates correctly, no TypeScript errors</done>
</task>

<task type="auto">
  <name>Task 2: Update home page Skincare module link to point to main view</name>
  <files>app/page.tsx</files>
  <action>
Update home page Skincare module card link from `/skincare/routines` (edit page) to `/skincare` (main display view).

Change:
```typescript
{
  href: '/skincare/routines', // OLD
  icon: Sparkles,
  title: 'Skincare',
  description: 'Daily routine tracker',
  available: true,
},
```

To:
```typescript
{
  href: '/skincare', // NEW - main view, not edit page
  icon: Sparkles,
  title: 'Skincare',
  description: 'Daily routine tracker',
  available: true,
},
```

This makes navigation flow: Home → Skincare main view → Edit routines (via button).

DON'T change Finance or Fitness module cards
DON'T change description or icon
</action>
  <verify>
1. Home page renders without errors
2. Clicking Skincare card navigates to /skincare (not /skincare/routines)
3. From /skincare, Edit button navigates to /skincare/routines
4. Navigation flow: / → /skincare → /skincare/routines works
  </verify>
  <done>Home page Skincare link updated, navigation flow verified</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Main Skincare page displaying today's routine with day selector and Edit button</what-built>
  <how-to-verify>
1. Start dev server: `npm run dev`
2. Navigate to home page (http://localhost:3000)
3. Click Skincare module card → should navigate to /skincare
4. Verify today's date/day displayed prominently
5. Verify day selector shows 7 days with today selected
6. Check morning routine section:
   - If no routine configured: see "No morning routine configured" message
   - If routine exists: see numbered list of steps (1. Step, 2. Step, etc.)
7. Check night routine section (same verification)
8. Click different day in selector → routines update for that day
9. Click Edit button at bottom → navigates to /skincare/routines
10. Verify Tokyo Night styling matches Finance module aesthetics
11. Test mobile responsiveness (resize to 375px width)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Main Skincare page (`/skincare`) renders correctly
- [ ] Today's routine displays with morning and night sections
- [ ] Day selector allows viewing other days' routines
- [ ] Edit button navigates to /skincare/routines
- [ ] Home page links to /skincare (not /skincare/routines)
- [ ] Manual verification approved by user
</verification>

<success_criteria>

- Main Skincare page created at `/skincare` with routine display
- Today's day automatically selected on page load
- Day selector enables viewing other days' routines
- Morning and night routine sections display steps in numbered order
- Empty routines show helpful "no routine configured" message
- Edit button links to /skincare/routines for modifications
- Home page Skincare module links to main view (not edit page)
- All verification checks pass
- Manual verification approved
- No errors or warnings introduced
- Phase 9.3 complete (Routine Display View)
</success_criteria>

<output>
After completion, create `.planning/phases/9.3-routine-display-view/9.3-01-SUMMARY.md`:

# Phase 9.3 Plan 1: Routine Display View Summary

**[Substantive one-liner - describe what shipped]**

## Accomplishments

- Created main Skincare page at `/skincare` displaying today's routine
- Day selector allows viewing routines for any day of the week
- Morning and night routine sections with numbered step lists
- Edit button navigation to /skincare/routines
- Updated home page link to main Skincare view

## Files Created/Modified

- `app/skincare/page.tsx` - Main Skincare module view with routine display
- `app/page.tsx` - Updated Skincare module link to /skincare

## Decisions Made

[Key decisions and rationale, or "None - followed Phase 9.2 patterns"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 9.3 complete. Skincare module v1 finished with routine tracking, management UI, and display view.
</output>
