---
phase: 8.2-hierarchical-navigation
plan: 03
type: execute
---

<objective>
Create desktop sidebar navigation to solve navigation discoverability on large screens.

Purpose: Desktop users currently have no visible navigation (BottomNav is hidden on lg+ screens), causing discoverability issues. Add persistent sidebar navigation on desktop while keeping mobile bottom tabs, creating responsive navigation that works across all screen sizes.
Output: DesktopNav sidebar component integrated into app layout, visible on desktop (lg+), hidden on mobile.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/8.2-hierarchical-navigation/8.2-RESEARCH.md
@.planning/phases/8.2-hierarchical-navigation/8.2-01-PLAN.md
@.planning/phases/8.2-hierarchical-navigation/8.2-02-PLAN.md
@app/layout.tsx
@app/finance/layout.tsx
@app/finance/components/BottomNav.tsx

**From Research:**
- Desktop sidebar should show Home + all Finance pages for discoverability
- Use `usePathname()` for active state highlighting
- Hidden on mobile (`hidden lg:flex`), BottomNav visible on mobile (existing `lg:hidden`)
- Sidebar pattern: vertical nav with icons + labels, w-64 width, border-r separator

**Current state:**
- BottomNav at app/finance/components/BottomNav.tsx: visible on mobile only (lg:hidden), fixed bottom
- Finance layout wraps content with pb-20 for BottomNav clearance on mobile, pb-0 on desktop
- No desktop navigation exists - users on desktop can't see available pages

**Navigation items to include (from research code examples):**
- Home (/)
- Finance (/finance) - with divider before it
- Budgets (/finance/budgets)
- Wants (/finance/wants)
- Analytics (/finance/analytics)
- Categories (/finance/categories)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DesktopNav sidebar component</name>
  <files>components/navigation/DesktopNav.tsx</files>
  <action>
Create Client Component for desktop sidebar navigation:

**Nav items array:**
```typescript
const navItems = [
  { href: '/', label: 'Home', icon: Home },
  { href: '/finance', label: 'Finance', icon: DollarSign, divider: true },
  { href: '/finance/budgets', label: 'Budgets', icon: Wallet },
  { href: '/finance/wants', label: 'Wants', icon: DollarSign },
  { href: '/finance/analytics', label: 'Analytics', icon: TrendingUp },
  { href: '/finance/categories', label: 'Categories', icon: Tags },
]
```

**Implementation requirements:**
- 'use client' directive
- Import: Link from 'next/link', usePathname from 'next/navigation'
- Import icons: Home, DollarSign, Wallet, TrendingUp, Tags from 'lucide-react'
- Use usePathname() to determine active item
- Active state: `pathname === item.href`
- Render as `<aside>` with `hidden lg:flex lg:flex-col` classes

**Structure:**
```tsx
<aside className="hidden lg:flex lg:flex-col w-64 border-r bg-background/95 backdrop-blur">
  <nav className="flex-1 p-4 space-y-1">
    {navItems.map((item) => {
      const Icon = item.icon
      const isActive = pathname === item.href
      return (
        <div key={item.href}>
          {item.divider && <div className="h-px bg-border my-2" />}
          <Link href={item.href} className={...}>
            <Icon className="h-5 w-5 flex-shrink-0" />
            <span>{item.label}</span>
          </Link>
        </div>
      )
    })}
  </nav>
</aside>
```

**Styling (Tokyo Night):**
- Container: w-64, border-r, bg-background/95 backdrop-blur (matches TopAppBar)
- Nav padding: p-4, space-y-1 between items
- Links: `flex items-center gap-3 px-3 py-2 rounded-md transition-colors`
- Active: `bg-primary text-primary-foreground font-medium`, aria-current="page"
- Inactive: `text-muted-foreground hover:bg-accent hover:text-foreground`
- Divider: `h-px bg-border my-2` (visual separation before Finance section)

DON'T show sidebar on mobile - use `hidden lg:flex` pattern
DON'T duplicate BottomNav items exactly - sidebar can show more items since vertical space isn't constrained
DON'T use external nav library - Next.js Link + usePathname is sufficient
  </action>
  <verify>
1. Component compiles without TypeScript errors
2. All lucide-react icons import successfully
3. usePathname() returns current path correctly
4. navItems array has 6 items (Home + 5 Finance pages)
5. Divider object property present on Finance item
  </verify>
  <done>DesktopNav component created with sidebar layout, 6 nav items, active state highlighting, Tokyo Night styling, hidden on mobile</done>
</task>

<task type="auto">
  <name>Task 2: Update layouts for responsive navigation grid</name>
  <files>app/layout.tsx, app/finance/layout.tsx</files>
  <action>
Modify root and Finance layouts to accommodate desktop sidebar:

**app/layout.tsx changes:**
- Import DesktopNav component: `import DesktopNav from '@/components/navigation/DesktopNav'`
- Wrap {children} in flex layout: `<div className="flex min-h-screen">`
- Add DesktopNav before children: `<DesktopNav /> <main className="flex-1">{children}</main>`
- Keep existing html structure, fonts, className
- Structure becomes:
```tsx
<html>
  <body>
    <div className="flex min-h-screen">
      <DesktopNav />
      <main className="flex-1">
        {children}
      </main>
    </div>
  </body>
</html>
```

**app/finance/layout.tsx changes:**
- Keep existing BottomNav import and rendering (still needed for mobile)
- Keep existing pb-20 lg:pb-0 on children wrapper (BottomNav clearance on mobile)
- NO changes needed to Finance layout structure - desktop nav is at root level
- Verify BottomNav still has lg:hidden class (from Phase 8.1)

**Layout hierarchy after changes:**
```
app/layout.tsx:
  <DesktopNav /> (desktop only)
  <main>
    app/finance/layout.tsx:
      {children}
      <BottomNav /> (mobile only)
```

**Responsive behavior:**
- Desktop (lg+): DesktopNav visible (sidebar), BottomNav hidden
- Mobile (<lg): DesktopNav hidden, BottomNav visible (fixed bottom)
- Both use same navigation items but different layouts for screen size

DON'T remove BottomNav - it's still needed for mobile navigation
DON'T change pb-20 lg:pb-0 padding - still needed for BottomNav clearance on mobile
DON'T nest DesktopNav inside Finance layout - it goes in root layout for app-wide visibility
  </action>
  <verify>
1. `npm run build` succeeds without errors
2. Start dev server, resize browser window:
   - Desktop (>1024px): sidebar visible on left, content on right, no bottom nav
   - Mobile (<1024px): sidebar hidden, bottom nav visible at bottom
3. Navigate between pages, confirm DesktopNav active state updates
4. Click Home in DesktopNav, confirm navigation to /
5. No layout shift or hydration errors in console
  </verify>
  <done>Root layout updated with DesktopNav in flex grid, Finance layout unchanged, responsive navigation working (sidebar desktop, bottom tabs mobile)</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] DesktopNav visible on desktop (lg+ screens), hidden on mobile
- [ ] BottomNav visible on mobile, hidden on desktop (existing behavior preserved)
- [ ] DesktopNav active state highlights current page correctly
- [ ] All navigation links functional (Home, Finance, Budgets, Wants, Analytics, Categories)
- [ ] No layout issues or hydration errors
- [ ] No TypeScript errors or console warnings
</verification>

<success_criteria>

- DesktopNav sidebar component created with 6 navigation items
- Root layout updated with flex grid containing DesktopNav + main content
- Responsive navigation working: sidebar on desktop, bottom tabs on mobile
- Active state highlighting functional with usePathname()
- Tokyo Night styling applied with frosted glass backdrop
- Phase 8.2 complete: hierarchical navigation fully implemented
- All verification checks pass
- No errors or warnings introduced
</success_criteria>

<output>
After completion, create `.planning/phases/8.2-hierarchical-navigation/8.2-03-SUMMARY.md`:

# Phase 8.2 Plan 3: Desktop Navigation Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- Created DesktopNav sidebar component with 6 navigation items
- Integrated DesktopNav into root layout with flex grid
- Established responsive navigation: sidebar (desktop) + bottom tabs (mobile)
- Active state highlighting with usePathname() integration
- Tokyo Night frosted glass styling matching TopAppBar aesthetic

## Files Created/Modified

- `components/navigation/DesktopNav.tsx` - Sidebar navigation for desktop
- `app/layout.tsx` - Added DesktopNav with flex layout grid
- `app/finance/layout.tsx` - Verified BottomNav mobile-only behavior

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

Phase 8.2 complete. Hierarchical navigation system fully implemented:
- ✅ Home page module navigation cards
- ✅ BottomNav routing to app root
- ✅ Breadcrumbs with ARIA accessibility
- ✅ TopAppBar with back button
- ✅ Desktop sidebar navigation

Navigation now works across all screen sizes with clear hierarchy: App > Module > Section > Detail. Ready for next phase.
</output>
