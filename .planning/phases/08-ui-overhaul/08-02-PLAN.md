---
phase: 08-ui-overhaul
plan: 02
type: execute
---

<objective>
Integrate shadcn/ui component system and refactor existing UI to use semantic design tokens with Motion animations.

Purpose: Replace hardcoded Tailwind classes with design-token-based components and add subtle animations for polish.
Output: shadcn/ui installed and configured, core components (Button, Card) refactored to use CSS variables, Motion library integrated with staggered list animations.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-ui-overhaul/DISCOVERY.md
@.planning/phases/08-ui-overhaul/08-01-SUMMARY.md
@app/finance/budgets/[id]/page.tsx
@app/finance/budgets/[id]/TransactionItem.tsx
@app/finance/components/BottomNav.tsx

**Tech stack available:**
- Switzer + JetBrains Mono fonts configured (from 08-01)
- Tokyo Night OKLCH color palette (from 08-01)
- CSS variables for all design tokens
- Tailwind CSS 4 with @theme inline

**Established patterns:**
- Server Components for data fetching
- Client Components only when interactivity needed
- Mobile-first responsive layouts
- Transaction lists with date grouping
- Budget cards with progress bars

**From DISCOVERY.md:**
- shadcn/ui compatible with Tailwind 4 + React 19
- Motion (formerly Framer Motion) for animations
- Limit animations to transform and opacity only
- Staggered reveals for lists, whileHover for cards
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install and configure shadcn/ui with Tailwind 4</name>
  <files>components/ui/button.tsx, components/ui/card.tsx, lib/utils.ts, package.json</files>
  <action>
    Install shadcn/ui CLI and initialize project:

    1. Run: `npx shadcn@latest init`
       - When prompted: Use CSS variables? → Yes (default)
       - Style: Default
       - Color: Neutral (we already have custom colors)
       - Where is your global CSS file? → app/globals.css
       - Where is your Tailwind config? → No config (using CSS-only Tailwind 4)
       - Configure imports? → Yes (@/ alias)
       - React Server Components? → Yes

    2. Install core components:
       - Run: `npx shadcn@latest add button`
       - Run: `npx shadcn@latest add card`

    This creates:
    - components/ui/button.tsx
    - components/ui/card.tsx
    - lib/utils.ts (with cn() utility)

    3. Install Motion for animations:
       - Run: `npm install motion`

    **Verification:**
    - Check components/ui/ directory contains button.tsx and card.tsx
    - Check lib/utils.ts exports cn function
    - Check package.json includes motion dependency
    - Verify components use semantic tokens (bg-primary, text-accent, etc.)

    **Avoid:**
    - Editing shadcn/ui components directly after creation (wrap in custom components)
    - Installing old "framer-motion" package (use "motion" instead)
    - Hardcoding colors in components (use CSS variable utilities)
  </action>
  <verify>ls components/ui/ shows button.tsx and card.tsx, cat lib/utils.ts shows cn export, cat package.json shows motion dependency, npm run build succeeds</verify>
  <done>shadcn/ui components installed, Motion library added, cn utility available, no build errors</done>
</task>

<task type="auto">
  <name>Task 2: Refactor budget cards and transaction items to use shadcn/ui + Motion</name>
  <files>app/finance/budgets/[id]/page.tsx, app/finance/budgets/[id]/TransactionItem.tsx, app/finance/budgets/page.tsx</files>
  <action>
    Replace hardcoded Tailwind with design-token-based components and animations:

    **In app/finance/budgets/[id]/page.tsx:**
    1. Import Card, CardHeader, CardTitle, CardContent from @/components/ui/card
    2. Import { motion } from 'motion/react'
    3. Replace budget detail header card:
       - Wrap in motion.div with whileHover={{ scale: 1.01 }} for subtle interaction
       - Use Card component with className="bg-muted/50 border-border"
       - Replace text-gray-* with semantic colors: text-foreground, text-muted-foreground
    4. Replace category breakdown cards with Card components
    5. Update progress bars to use bg-primary/bg-accent instead of hardcoded colors
    6. Replace button classes with semantic tokens: bg-muted text-muted-foreground

    **In app/finance/budgets/[id]/TransactionItem.tsx:**
    1. Make this a Client Component (add 'use client')
    2. Import { motion } from 'motion/react'
    3. Wrap root div in motion.div with subtle animations:
       - initial={{ opacity: 0, y: 10 }}
       - animate={{ opacity: 1, y: 0 }}
       - transition={{ duration: 0.2 }}
    4. Replace bg-white with bg-muted
    5. Replace border-gray-200 with border-border
    6. Replace text-gray-* with text-foreground/text-muted-foreground
    7. Keep category color badges using inline styles (they're dynamic)

    **In app/finance/budgets/page.tsx (budget list):**
    1. Import Card components and motion
    2. Add staggered reveal animation for budget list:
       - container variants: staggerChildren: 0.08
       - item variants: hidden → show with y: 20 → y: 0
    3. Wrap each budget card in motion.div with item variants
    4. Replace bg-white with bg-muted
    5. Update "Create Budget" button to use bg-primary text-primary-foreground

    **Preserve functionality:**
    - Keep all Server Actions working
    - Keep all data fetching logic unchanged
    - Keep mobile-responsive layouts (touch targets, breakpoints)
    - Maintain existing form behavior

    **Avoid:**
    - Animating width/height/layout properties (use transform only)
    - Converting Server Components to Client unnecessarily (only TransactionItem needs 'use client')
    - Over-animating (limit to list stagger + card hover)
  </action>
  <verify>npm run dev, navigate to /finance/budgets and /finance/budgets/[id], verify cards use new colors, staggered animation on budget list, hover effect on cards, no layout shifts, mobile touch targets still 44px</verify>
  <done>Budget and transaction cards use shadcn/ui Card component, semantic color tokens applied, Motion animations working, mobile layout preserved, no console errors</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Refactored finance module UI with shadcn/ui components, Tokyo Night color palette, Switzer/JetBrains Mono fonts, and Motion animations</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000/finance/budgets
    3. Desktop verification:
       - Confirm Switzer font on headings/body text (not Geist)
       - Confirm JetBrains Mono on dollar amounts
       - Confirm Tokyo Night colors (deep purple backgrounds, cyan accents)
       - Hover over budget cards - should scale slightly
       - Budget list should stagger-fade-in on page load
    4. Mobile verification (resize to 375px or use device):
       - Confirm font legibility at small sizes
       - Confirm colors maintain contrast
       - Confirm animations don't cause jank (smooth 60fps)
       - Confirm touch targets still 44px minimum
    5. Visit: http://localhost:3000/finance/budgets/[pick-any-budget-id]
       - Confirm transaction items fade in individually
       - Confirm category badges still show custom colors
       - Confirm progress bars use primary/accent colors
    6. Test dark mode (should be default):
       - Confirm deep purple background (Tokyo Night)
       - Confirm cyan accents on buttons/links
       - No harsh white backgrounds
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe visual issues (color contrast problems, animation jank, font legibility, layout breaks)</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds
- [ ] shadcn/ui components render correctly
- [ ] Motion animations perform smoothly (60fps)
- [ ] Fonts load correctly (Switzer + JetBrains Mono)
- [ ] Colors match Tokyo Night palette
- [ ] Mobile layout preserved (no regressions)
- [ ] User approves visual changes in checkpoint
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- shadcn/ui Button and Card components integrated
- Budget and transaction UI refactored with semantic tokens
- Motion animations active (list stagger, card hover)
- No TypeScript errors or runtime warnings
- User verifies design meets "distinctive, non-generic" goal
  </success_criteria>

<output>
After completion, create `.planning/phases/08-ui-overhaul/08-02-SUMMARY.md`:

# Phase 8 Plan 2: Component System Summary

**[Substantive one-liner - what UI shipped]**

## Accomplishments

- [shadcn/ui integration details]
- [Component refactoring scope]
- [Animation implementation]
- [Visual verification results]

## Files Created/Modified

- `components/ui/button.tsx` - shadcn/ui button with semantic tokens
- `components/ui/card.tsx` - shadcn/ui card component
- `lib/utils.ts` - cn utility for className merging
- `app/finance/budgets/page.tsx` - [changes]
- `app/finance/budgets/[id]/page.tsx` - [changes]
- `app/finance/budgets/[id]/TransactionItem.tsx` - [changes]

## Decisions Made

[Component architecture choices, animation decisions, or "None"]

## Issues Encountered

[Animation performance issues, color contrast problems, or "None"]

## Next Step

Ready for 08-03-PLAN.md - Visual Enhancement (backgrounds, charts, remaining polish)
</output>
