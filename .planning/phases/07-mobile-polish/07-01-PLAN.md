---
phase: 07-mobile-polish
plan: 01
type: execute
---

<objective>
Enhance mobile experience with persistent navigation, optimized touch targets, improved loading states, and viewport configuration.

Purpose: Transform Personal Nexus into a polished mobile-first experience where expense tracking is seamless on phones. Users primarily interact with this app on-the-go (logging SMS expenses, checking budgets), so mobile UX is critical.
Output: Mobile-optimized UI with persistent navigation bar, improved touch targets, loading states, and proper viewport configuration.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-analytics-dashboard/06-03-SUMMARY.md

**Tech stack available:**
- Next.js 16 App Router
- Tailwind CSS v4 for styling
- React 19.2
- Mobile-first design already established

**Established patterns:**
- Server Components for data fetching
- Client Components for interactivity
- Tailwind responsive breakpoints (sm:, lg:)
- Modular /app/finance structure

**Key files:**
@app/layout.tsx
@app/finance/page.tsx
@app/finance/budgets/[id]/page.tsx
@app/finance/analytics/page.tsx

**Current mobile state:**
- Responsive grids already implemented (grid-cols-1 lg:grid-cols-2)
- Forms use adequate touch targets (py-2, py-3)
- Charts use ResponsiveContainer for responsiveness
- Navigation is manual via back links (no persistent nav)

**Issues being addressed:**
- No persistent bottom navigation for quick access to key pages
- Some small touch targets could be improved
- Missing loading states during data fetches
- No viewport meta tag verification for proper mobile rendering
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add mobile-optimized viewport meta tags and create persistent bottom navigation</name>
  <files>app/layout.tsx, app/finance/components/BottomNav.tsx</files>
  <action>
  1. Update app/layout.tsx metadata to include viewport configuration for mobile:
     - Add viewport metadata: "width=device-width, initial-scale=1, maximum-scale=5"
     - Ensures proper mobile rendering and prevents auto-zoom issues

  2. Create app/finance/components/BottomNav.tsx Client Component:
     - Fixed bottom navigation bar (fixed bottom-0 left-0 right-0)
     - Four navigation items: Budgets, Analytics, Home/Overview, Categories
     - Use next/link for navigation
     - Highlight active route using usePathname()
     - Mobile-only (hidden on desktop with lg:hidden)
     - Large touch targets (py-3, min-height 60px total)
     - Safe area inset for iOS devices (pb-safe)
     - Icons using simple SVG (home, chart, list, tag)
     - Background: bg-white with border-t border-gray-200 shadow-lg
     - Text: Active item text-blue-600, inactive text-gray-600
     - Include padding-bottom on page content to prevent overlap (pb-20)

  3. Add BottomNav to finance module layout:
     - Create app/finance/layout.tsx with BottomNav component
     - Apply pb-20 to main content wrapper to prevent bottom nav overlap
     - Only shows within /finance routes

  Avoid custom icon libraries to minimize bundle size - use inline SVG paths.
  </action>
  <verify>npm run build succeeds, visit /finance/budgets on mobile viewport, bottom nav appears with 4 items</verify>
  <done>Viewport meta tag added to root layout, BottomNav component created with 4 navigation items, finance layout wraps pages with BottomNav, build passes</done>
</task>

<task type="auto">
  <name>Task 2: Optimize touch targets and add loading states</name>
  <files>app/finance/budgets/[id]/TransactionItem.tsx, app/finance/budgets/[id]/CategoryAllocation.tsx, app/finance/analytics/BudgetSelector.tsx</files>
  <action>
  1. TransactionItem.tsx - Improve touch targets:
     - Edit category button: Increase padding from px-2 py-1 to px-3 py-2 (minimum 44px height)
     - Delete button: Change from text link to proper button with px-4 py-2 and rounded border
     - Add hover/active states with transition for tactile feedback

  2. CategoryAllocation.tsx - Loading and empty states:
     - Add loading skeleton while categories fetch (gray animated pulse rectangles)
     - Improve empty state with icon and helpful text
     - Ensure all interactive elements have min-height: 44px for touch

  3. BudgetSelector.tsx - Improve touch target:
     - Increase select padding from py-2 to py-3 (better thumb reach)
     - Add text-base for 16px minimum font size (prevents iOS zoom)
     - Add appearance-none and custom dropdown arrow for consistent styling

  Follow Apple's Human Interface Guidelines: 44x44pt minimum touch target.
  Avoid touch targets smaller than 44x44px - users will struggle to tap accurately on mobile.
  </action>
  <verify>Inspect element on mobile viewport shows buttons ≥44px height, select dropdown has text-base and py-3, loading states appear correctly</verify>
  <done>All interactive elements have minimum 44px touch targets, loading states added where needed, budget selector optimized for mobile, TypeScript compiles without errors</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Mobile navigation system with persistent bottom nav, optimized touch targets, and improved loading states</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Open browser DevTools and toggle device emulation (iPhone SE or similar)
    3. Visit: http://localhost:3000/finance/budgets
    4. Test bottom navigation:
       - Verify bottom nav appears with 4 items (Budgets, Analytics, Home, Categories)
       - Tap each nav item, verify navigation works and active state highlights
       - Verify nav stays visible when scrolling
       - Verify content doesn't get hidden behind nav (pb-20 applied)
    5. Test touch targets on budget detail page:
       - Verify Edit/Delete/Save buttons are easy to tap (≥44px)
       - Verify category selector dropdown is easy to use
       - Test transaction category edit button
    6. Test on desktop viewport (>1024px):
       - Verify bottom nav is hidden (lg:hidden works)
       - Verify layouts still work correctly
    7. Check iOS-style interactions:
       - Select inputs don't trigger zoom (16px font minimum)
       - Bottom nav respects safe area on iPhone notch
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] npm run build succeeds without errors
- [ ] npm run lint passes
- [ ] Bottom navigation appears on mobile, hidden on desktop
- [ ] All touch targets meet 44px minimum
- [ ] Navigation between pages works smoothly
- [ ] Content doesn't overlap with bottom nav
- [ ] Loading states appear appropriately
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Mobile viewport meta tags configured
- Persistent bottom navigation functional
- Touch targets optimized (≥44px)
- Loading states implemented
- No TypeScript errors
- No layout shift or overlap issues
- Desktop experience unchanged (bottom nav hidden)
  </success_criteria>

<output>
After completion, create `.planning/phases/07-mobile-polish/07-01-SUMMARY.md`:

# Phase 7 Plan 1: Mobile Navigation and Touch Optimization Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [List key outcomes]

## Files Created/Modified

- `file.tsx` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

Phase 7 complete - ready for Phase 8: UI Overhaul
</output>
